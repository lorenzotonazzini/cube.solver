(function(){var t,r,i,e,o,n,s,u,l,$,h,f,a,_,p,v,F,c,R,U,m,D,g,B,L,b,y,T,d,M,w,P,x,j,C,O,S,k,q,z,A,E,G,H,I,J,K,N,Q,V,W,X,Y,Z,tt,tr,ti,te,to,tn,ts=[].indexOf;for(Q in s=this.Cube||require("./cube"),[x,P,F,u,m,i]=[0,1,2,3,4,5],[A,S,q,C,f,_,$,v]=[0,1,2,3,4,5,6,7],[z,O,k,j,p,h,a,l,R,c,e,o]=[0,1,2,3,4,5,6,7,8,9,10,11],n=function(t,r){var i,e,o;if(t<r)return 0;for(r>t/2&&(r=t-r),o=1,i=t,e=1;i!==t-r;)o*=i,o/=e,i--,e++;return o},N=function(t){var r,i,e,o;for(r=1,i=e=2,o=t;2<=o?e<=o:e>=o;i=2<=o?++e:--e)r*=i;return r},V=function(t,r){return t>r?t:r},te=function(t,r,i){var e,o,n,s,u;for(u=t[r],e=o=n=r,s=i-1;n<=s?o<=s:o>=s;e=n<=s?++o:--o)t[e]=t[e+1];return t[i]=u},to=function(t,r,i){var e,o,n,s,u;for(u=t[i],e=o=n=i,s=r+1;n<=s?o<=s:o>=s;e=n<=s?++o:--o)t[e]=t[e-1];return t[r]=u},U={twist:function(t){var r,i,e,o,n,s;if(null!=t){for(n=0,r=i=6;i>=0;r=--i)o=t%3,t=t/3|0,this.co[r]=o,n+=o;return this.co[7]=(3-n%3)%3,this}for(s=0,r=e=0;e<=6;r=++e)s=3*s+this.co[r];return s},flip:function(t){var r,i,e,o,n,s;if(null!=t){for(n=0,r=i=10;i>=0;r=--i)o=t%2,t=t/2|0,this.eo[r]=o,n+=o;return this.eo[11]=(2-n%2)%2,this}for(s=0,r=e=0;e<=10;r=++e)s=2*s+this.eo[r];return s},cornerParity:function(){var t,r,i,e,o,n,s,u,l;for(l=0,t=i=o=v,n=A+1;o<=n?i<=n:i>=n;t=o<=n?++i:--i)for(r=e=s=t-1,u=A;s<=u?e<=u:e>=u;r=s<=u?++e:--e)this.cp[r]>this.cp[t]&&l++;return l%2},edgeParity:function(){var t,r,i,e,n,s,u,l,$;for($=0,t=i=n=o,s=z+1;n<=s?i<=s:i>=s;t=n<=s?++i:--i)for(r=e=u=t-1,l=z;u<=l?e<=l:e>=l;r=u<=l?++e:--e)this.ep[r]>this.ep[t]&&$++;return $%2},URFtoDLF:(tt=function(t,r,i,e=!1){var o,s,u,l,$,h;return u=N((l=i-r)+1),"corners"===t?(s=7,h="cp"):(s=11,h="ep"),$=function(){var t,r,i;for(i=[],o=t=0,r=l;0<=r?t<=r:t>=r;o=0<=r?++t:--t)i.push(0);return i}(),function(t){var f,a,_,p,v,F,c,R,U,m,D,g,B,L,b,y,T,d,M,w,P,x,j,C,O,S,k;if(null!=t){for(o=F=0,D=l;0<=D?F<=D:F>=D;o=0<=D?++F:--F)$[o]=o+r;for(a=t%u,f=t/u|0,U=this[h],o=c=0,g=s;0<=g?c<=g:c>=g;o=0<=g?++c:--c)U[o]=-1;for(p=R=1,L=l;1<=L?R<=L:R>=L;p=1<=L?++R:--R)for(v=a%(p+1),a=a/(p+1)|0;v>0;)to($,0,p),v--;if(O=l,e)for(p=m=0,b=s;0<=b?m<=b:m>=b;p=0<=b?++m:--m)f-(_=n(s-p,O+1))>=0&&(U[p]=$[l-O],f-=_,O--);else for(p=x=y=s;y<=0?x<=0:x>=0;p=y<=0?++x:--x)f-(_=n(p,O+1))>=0&&(U[p]=$[O],f-=_,O--);return this}for(U=this[h],o=j=0,T=l;0<=T?j<=T:j>=T;o=0<=T?++j:--j)$[o]=-1;if(f=a=O=0,e)for(p=C=d=s;d<=0?C<=0:C>=0;p=d<=0?++C:--C)r<=(M=U[p])&&M<=i&&(f+=n(s-p,O+1),$[l-O]=U[p],O++);else for(p=S=0,w=s;0<=w?S<=w:S>=w;p=0<=w?++S:--S)r<=(P=U[p])&&P<=i&&(f+=n(p,O+1),$[O]=U[p],O++);for(p=k=B=l;B<=0?k<=0:k>=0;p=B<=0?++k:--k){for(v=0;$[p]!==r+p;)te($,0,p),v++;a=(p+1)*a+v}return f*u+a}})("corners",A,_),URtoUL:tt("edges",z,k),UBtoDF:tt("edges",j,h),URtoDF:tt("edges",z,h),FRtoBR:tt("edges",R,o,!0)})tn=U[Q],s.prototype[Q]=tn;H=function(t,r,i){var e,o,n,u,l,$,h,f,a,_,p,v;for(e="corners"===t?"cornerMultiply":"edgeMultiply",o=new s,v=[],n=h=0,p=i-1;0<=p?h<=p:h>=p;n=0<=p?++h:--h){for(o[r](n),u=[],l=a=0;a<=5;l=++a){for(f=s.moves[l],$=_=0;_<=2;$=++_)o[e](f),u.push(o[r]());o[e](f)}v.push(u)}return v},W=(t=new s,r=new s,function(i,e){var o,n;for(t.URtoUL(i),r.UBtoDF(e),o=n=0;n<=7;o=++n)if(-1!==t.ep[o]){if(-1!==r.ep[o])return -1;r.ep[o]=t.ep[o]}return r.URtoDF()}),y=2187,D=2048,B=2,g=11880,L=495,b=24,d=20160,M=20160,w=1320,T=1320,s.moveTables={parity:[[1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1],[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]],twist:null,flip:null,FRtoBR:null,URFtoDLF:null,URtoDF:null,URtoUL:null,UBtoDF:null,mergeURtoDF:null},X={twist:["corners",y],flip:["edges",D],FRtoBR:["edges",g],URFtoDLF:["corners",d],URtoDF:["edges",M],URtoUL:["edges",w],UBtoDF:["edges",T],mergeURtoDF:[]},s.computeMoveTables=function(...t){var r,i,e,o,n,s;for(0===t.length&&(t=function(){var t;for(e in t=[],X)t.push(e);return t}()),i=0,r=t.length;i<r;i++)s=t[i],null===this.moveTables[s]&&("mergeURtoDF"===s?this.moveTables.mergeURtoDF=function(){var t,r,i,e;for(e=[],r=i=0;i<=335;r=++i)e.push(function(){var i,e;for(e=[],t=i=0;i<=335;t=++i)e.push(W(r,t));return e}());return e}():([o,n]=X[s],this.moveTables[s]=H(o,s,n)));return this},E=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],Y=function(){var t,r,i,e,o,n,s,u;for(u=[],r=i=0;i<=5;r=++i){for(e=[],t=o=0;o<=5;t=++o)if(t!==r&&t!==r-3)for(s=n=0;n<=2;s=++n)e.push(3*t+s);u.push(e)}return u}(),G=[0,1,2,4,7,9,10,11,13,16],Z=function(){var t,r,i,e,o,n,s,u,l,$;for($=[],r=e=0;e<=5;r=++e){for(o=[],t=n=0;n<=5;t=++n)if(t!==r&&t!==r-3)for(s=0,i=(l=0===t||3===t?[0,1,2]:[1]).length;s<i;s++)u=l[s],o.push(3*t+u);$.push(o)}return $}(),tr=function(t,r,i){var e,o,n;return(e=r%8,n=r>>3,o=e<<2,null!=i)?(t[n]&=~(15<<o),t[n]|=i<<o,i):(t[n]&15<<o)>>>o},I=function(t,r,i,e){var o,n,s,u,l,$,h,f,a,_,p,v,F;for(v=function(){var t,i,e;for(e=[],F=t=0,i=Math.ceil(r/8)-1;0<=i?t<=i:t>=i;F=0<=i?++t:--t)e.push(4294967295);return e}(),f=1===t?E:G,tr(v,0,n=0),s=1;s!==r;){for(u=$=0,p=r-1;0<=p?$<=p:$>=p;u=0<=p?++$:--$)if(tr(v,u)===n)for(_=0,o=i(u),l=f.length;_<l;_++)15===tr(v,a=e(o,h=f[_]))&&(tr(v,a,n+1),s++);n++}return v},s.pruningTables={sliceTwist:null,sliceFlip:null,sliceURFtoDLFParity:null,sliceURtoDFParity:null},ti={sliceTwist:[1,L*y,function(t){return[t%L,t/L|0]},function(t,r){var i,e,o,n;return[o,n]=t,i=s.moveTables.FRtoBR[24*o][r]/24|0,(e=s.moveTables.twist[n][r])*L+i}],sliceFlip:[1,L*D,function(t){return[t%L,t/L|0]},function(t,r){var i,e,o,n;return[n,i]=t,o=s.moveTables.FRtoBR[24*n][r]/24|0,(e=s.moveTables.flip[i][r])*L+o}],sliceURFtoDLFParity:[2,b*d*B,function(t){return[t%2,(t/2|0)%b,(t/2|0)/b|0]},function(t,r){var i,e,o,n,u,l;return[u,l,i]=t,e=s.moveTables.parity[u][r],o=s.moveTables.FRtoBR[l][r],((n=s.moveTables.URFtoDLF[i][r])*b+o)*2+e}],sliceURtoDFParity:[2,b*M*B,function(t){return[t%2,(t/2|0)%b,(t/2|0)/b|0]},function(t,r){var i,e,o,n,u,l;return[u,l,i]=t,e=s.moveTables.parity[u][r],o=s.moveTables.FRtoBR[l][r],((n=s.moveTables.URtoDF[i][r])*b+o)*2+e}]},s.computePruningTables=function(...t){var r,i,e,o,n;for(0===t.length&&(t=function(){var t;for(e in t=[],ti)t.push(e);return t}()),i=0,r=t.length;i<r;i++)n=t[i],null===this.pruningTables[n]&&(o=ti[n],this.pruningTables[n]=I(...o));return this},s.initSolver=function(){return s.computeMoveTables(),s.computePruningTables()},s.prototype.solveUpright=function(t=22){var r,i,e,o,n,u,l,$,h,f;return r=class t{constructor(t){this.parent=null,this.lastMove=null,this.depth=0,t&&this.init(t)}init(t){return this.flip=t.flip(),this.twist=t.twist(),this.slice=t.FRtoBR()/b|0,this.parity=t.cornerParity(),this.URFtoDLF=t.URFtoDLF(),this.FRtoBR=t.FRtoBR(),this.URtoUL=t.URtoUL(),this.UBtoDF=t.UBtoDF(),this}solution(){return this.parent?this.parent.solution()+(e=function(){var t,r,i,e,o,n,s;for(r=["U","R","F","D","L","B"],n=["","2","'"],s=[],t=i=0;i<=5;t=++i)for(o=e=0;e<=2;o=++e)s.push(r[t]+n[o]);return s}())[this.lastMove]+" ":""}move(t,r,i){return s.moveTables[t][r][i]}pruning(t,r){return tr(s.pruningTables[t],r)}moves1(){return null!==this.lastMove?Y[this.lastMove/3|0]:E}minDist1(){var t,r;return V(t=this.pruning("sliceFlip",L*this.flip+this.slice),r=this.pruning("sliceTwist",L*this.twist+this.slice))}next1(t){var r;return(r=i.pop()).parent=this,r.lastMove=t,r.depth=this.depth+1,r.flip=this.move("flip",this.flip,t),r.twist=this.move("twist",this.twist,t),r.slice=this.move("FRtoBR",24*this.slice,t)/24|0,r}moves2(){return null!==this.lastMove?Z[this.lastMove/3|0]:G}minDist2(){var t,r,i,e;return i=(b*this.URtoDF+this.FRtoBR)*B+this.parity,t=this.pruning("sliceURtoDFParity",i),e=(b*this.URFtoDLF+this.FRtoBR)*B+this.parity,V(t,r=this.pruning("sliceURFtoDLFParity",e))}init2(t=!0){if(null!==this.parent&&(this.parent.init2(!1),this.URFtoDLF=this.move("URFtoDLF",this.parent.URFtoDLF,this.lastMove),this.FRtoBR=this.move("FRtoBR",this.parent.FRtoBR,this.lastMove),this.parity=this.move("parity",this.parent.parity,this.lastMove),this.URtoUL=this.move("URtoUL",this.parent.URtoUL,this.lastMove),this.UBtoDF=this.move("UBtoDF",this.parent.UBtoDF,this.lastMove),t))return this.URtoDF=this.move("mergeURtoDF",this.URtoUL,this.UBtoDF)}next2(t){var r;return(r=i.pop()).parent=this,r.lastMove=t,r.depth=this.depth+1,r.URFtoDLF=this.move("URFtoDLF",this.URFtoDLF,t),r.FRtoBR=this.move("FRtoBR",this.FRtoBR,t),r.parity=this.move("parity",this.parity,t),r.URtoDF=this.move("URtoDF",this.URtoDF,t),r}},$=null,n=function(r){var i,e,n,s;for(s=[],i=e=1,n=t;(1<=n?e<=n:e>=n)&&(o(r,i),null===$);i=1<=n?++e:--e)s.push(void 0);return s},o=function(t,r){var e,n,s,u,h,f,a;if(0===r){if(0===t.minDist1()&&(null===t.lastMove||(h=t.lastMove,0>ts.call(G,h))))return l(t)}else if(r>0&&t.minDist1()<=r){for(n=0,f=t.moves1(),a=[],e=f.length;n<e&&(s=f[n],o(u=t.next1(s),r-1),i.push(u),null===$);n++)a.push(void 0);return a}},l=function(r){var i,e,o,n;for(r.init2(),n=[],i=e=1,o=t-r.depth;(1<=o?e<=o:e>=o)&&(u(r,i),null===$);i=1<=o?++e:--e)n.push(void 0);return n},u=function(t,r){var e,o,n,s,l,h;if(0===r){if(0===t.minDist2())return $=t.solution()}else if(r>0&&t.minDist2()<=r){for(o=0,l=t.moves2(),h=[],e=l.length;o<e&&(n=l[o],u(s=t.next2(n),r-1),i.push(s),null===$);o++)h.push(void 0);return h}},n(h=(i=function(){var i,e,o;for(o=[],f=i=0,e=t+1;0<=e?i<=e:i>=e;f=0<=e?++i:--i)o.push(new r);return o}()).pop().init(this)),i.push(h),$.trim()},K={U:0,R:1,F:2,D:3,L:4,B:5},J={0:"U",1:"R",2:"F",3:"D",4:"L",5:"B"},s.prototype.solve=function(t=22){var r,i,e,o,n,u,l,$,h;for($=(r=this.clone()).upright(),r.move($),u=new s().move($).center,h=r.solveUpright(t),l=[],n=h.split(" "),e=0,i=n.length;e<i;e++)o=n[e],l.push(J[u[K[o[0]]]]),o.length>1&&(l[l.length-1]+=o[1]);return l.join(" ")},s.scramble=function(){return s.inverse(s.random().solve())}}).call(this);